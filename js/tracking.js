window.updateTracking=function(t,e,n,a=null){const c=getStoredTrackingData();if("ranked"===e&&null!==a){const i=`${t}::${a}`;!0===n?(c[i]||(c[i]={}),c[i]["ranked-date"]=(new Date).toISOString().split(".")[0]+"Z",c[i][e]=n):delete c[i],localStorage.setItem("unitTracking",JSON.stringify(c)),document.querySelectorAll(`.${e}-checkbox[data-unit="${t}"][data-rank="${a}"]`).forEach(t=>t.checked=n)}else"owned"===e&&(unitData.forEach(a=>{if(a.unit_name===t){const t=`${a.unit_name}::${a.rank}`;c[t]||(c[t]={}),c[t][e]=n}}),localStorage.setItem("unitTracking",JSON.stringify(c)),document.querySelectorAll(`.${e}-checkbox[data-unit="${t}"]`).forEach(t=>t.checked=n))};